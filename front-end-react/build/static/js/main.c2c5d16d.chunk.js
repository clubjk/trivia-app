(this["webpackJsonptrivia-app"]=this["webpackJsonptrivia-app"]||[]).push([[0],{16:function(e,t){e.exports={WebsocketEndpoint:"wss://jafr4tmzjl.execute-api.us-east-2.amazonaws.com/Prod"}},30:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(12),c=n.n(r),i=n(13),l=n(14),o=n(20),j=n(18),u=n(19),d=n(39),h=n(40),m=n(38),b=n(32),O=n(17),p=n(37),x=n(33),S=n(34),y=n(35),f=n(36),g=n(15),v=n(16),T=n(2),w={STEP_GETSTARTED:{value:0},STEP_JOINGAME:{value:1},STEP_WAITING:{value:2},STEP_QUESTIONS:{value:3},STEP_GAMEOVER:{value:4}};function E(e){return e.currentStep!==w.STEP_GETSTARTED?null:Object(T.jsx)(d.a,{children:Object(T.jsxs)(d.a.Body,{children:[Object(T.jsx)(d.a.Title,{children:"Get Started"}),Object(T.jsx)(d.a.Text,{children:"Click the button below to start a new game."}),Object(T.jsx)(h.a,{variant:"primary",onClick:e.onNewGame,children:"Create a New Game"})]})})}function I(e){return e.currentStep!==w.STEP_JOINGAME?null:Object(T.jsx)(d.a,{children:Object(T.jsxs)(d.a.Body,{children:[Object(T.jsx)(d.a.Title,{children:"Join Game"}),Object(T.jsx)(d.a.Text,{children:"You've been invited to join a game!"}),Object(T.jsx)(h.a,{variant:"primary",onClick:e.onJoinGame,children:"Join"})]})})}function G(e){if(e.currentStep!==w.STEP_WAITING)return null;var t=new URL("#newgame/".concat(e.gameId),document.baseURI).href,n=e.gameId?Object(T.jsxs)(d.a.Text,{children:["Share the link below with players joining the game",Object(T.jsx)(m.a.Control,{type:"text",value:t,readOnly:!0}),Object(T.jsx)(h.a,{variant:"primary",onClick:e.onStartGame,children:"Start Game"})]}):Object(T.jsx)(b.a,{animation:"grow",variant:"secondary"});return Object(T.jsx)(d.a,{children:Object(T.jsxs)(d.a.Body,{children:[Object(T.jsx)(d.a.Title,{children:"Waiting for players"}),n]})})}function N(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),s=n[0],r=n[1];if(e.currentStep!==w.STEP_QUESTIONS)return null;var c=e.question?Object(T.jsxs)(O.a,{lg:"8",children:[Object(T.jsx)("b",{children:e.question.question}),Object(T.jsx)("div",{className:"d-grid gap-2",children:e.question.options.map((function(t,n){var a=e.question.id+"-"+n;return Object(T.jsx)(h.a,{variant:s===a?"success":"secondary",onClick:function(){return function(t,n,a){e.onAnswer(n,a),r(t)}(a,e.question.id,t)},size:"lg",block:!0,children:t},a)}))})]}):Object(T.jsx)(b.a,{animation:"grow",variant:"secondary"});return Object(T.jsx)(d.a,{children:Object(T.jsxs)(d.a.Body,{children:[Object(T.jsx)(d.a.Title,{children:"Let's Play!"}),c]})})}function k(e){return e.playerList?Object(T.jsx)(d.a,{children:Object(T.jsxs)(d.a.Body,{children:[Object(T.jsx)(d.a.Title,{children:"Players"}),Object(T.jsx)(p.a,{children:e.playerList&&e.playerList.filter((function(e){return e.currentPlayer})).map((function(e,t){return Object(T.jsxs)(p.a.Item,{variant:"primary",className:"d-flex justify-content-between align-items-center",children:[Object(T.jsxs)("span",{style:{color:e.playerName},children:["\u2b24 ",Object(T.jsx)("span",{className:"small",style:{color:"Black"},children:e.playerName})]}),Object(T.jsx)(x.a,{pill:!0,variant:"dark",children:e.score})]},e.connectionId)}))}),Object(T.jsx)("p",{}),Object(T.jsx)(p.a,{children:e.playerList?e.playerList.filter((function(e){return!e.currentPlayer})).map((function(e,t){return Object(T.jsxs)(p.a.Item,{className:"d-flex justify-content-between align-items-center",children:[Object(T.jsxs)("span",{style:{color:e.playerName},children:["\u2b24 ",Object(T.jsx)("span",{className:"small",style:{color:"Black"},children:e.playerName})]}),Object(T.jsx)(x.a,{pill:!0,variant:"dark",children:e.score})]},e.connectionId)})):Object(T.jsx)("div",{children:"no players"})})]})}):null}function P(e){if(e.currentStep!==w.STEP_GAMEOVER)return null;return Object(T.jsxs)(S.a,{children:[Object(T.jsx)("h1",{children:"Game Completed!"}),Object(T.jsx)("p",{}),Object(T.jsx)("p",{children:Object(T.jsx)(h.a,{variant:"primary",onClick:function(){document.location=document.baseURI},children:"Restart"})})]})}var _=function(e){Object(o.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).ws=new WebSocket(v.WebsocketEndpoint),a.state={currentStep:document.location.hash.startsWith("#newgame")?w.STEP_JOINGAME:w.STEP_GETSTARTED,connected:!1,playerList:null,gameId:document.location.hash.startsWith("#newgame")?document.location.hash.replace("#newgame/",""):null,question:null},a}return Object(l.a)(n,[{key:"newGame",value:function(){var e=JSON.stringify({action:"newgame"});this.ws.send(e),this.setState({currentStep:w.STEP_WAITING})}},{key:"joinGame",value:function(){var e=JSON.stringify({action:"joingame",gameid:this.state.gameId});this.ws.send(e),this.setState({currentStep:w.STEP_QUESTIONS})}},{key:"startGame",value:function(){var e=JSON.stringify({action:"startgame",gameid:this.state.gameId});this.ws.send(e),this.setState({currentStep:w.STEP_QUESTIONS})}},{key:"answer",value:function(e,t){var n=JSON.stringify({action:"answer",gameid:this.state.gameId,questionid:e,answer:t});this.ws.send(n)}},{key:"componentDidMount",value:function(){var e=this;this.ws.onopen=function(){e.setState({connected:!0})},this.ws.onmessage=function(t){var n=JSON.parse(t.data);switch(n.action){case"gamecreated":e.setState({gameId:n.gameId});break;case"playerlist":e.setState({playerList:n.players.splice(0)});break;case"question":e.setState({question:n.question});break;case"gameover":e.setState({currentStep:w.STEP_GAMEOVER})}},this.ws.onclose=function(){e.setState({connected:!1})}}},{key:"render",value:function(){var e=this;return Object(T.jsx)(y.a,{className:"p-3",children:Object(T.jsxs)(f.a,{children:[Object(T.jsxs)(O.a,{children:[Object(T.jsx)(E,{currentStep:this.state.currentStep,onNewGame:function(){return e.newGame()}}),Object(T.jsx)(I,{currentStep:this.state.currentStep,onJoinGame:function(){return e.joinGame()},gameId:this.state.gameId}),Object(T.jsx)(G,{currentStep:this.state.currentStep,onStartGame:function(){return e.startGame()},gameId:this.state.gameId}),Object(T.jsx)(N,{currentStep:this.state.currentStep,onAnswer:function(t,n){return e.answer(t,n)},question:this.state.question}),Object(T.jsx)(P,{currentStep:this.state.currentStep}),this.state.connected?Object(T.jsx)("small",{children:"\ud83d\udfe9 connected"}):Object(T.jsx)("small",{children:"\ud83d\udfe5 disconnected"})]}),Object(T.jsxs)(O.a,{xs:3,children:[Object(T.jsx)(k,{playerList:this.state.playerList}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"d-flex justify-content-center",children:this.state.question&&Object(T.jsx)(g.CountdownCircleTimer,{size:120,isPlaying:!0,duration:5,colors:[["#007bff"]],children:function(e){return e.remainingTime}},this.state.question.id)})]})]})})}}]),n}(s.a.Component);c.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(_,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.c2c5d16d.chunk.js.map